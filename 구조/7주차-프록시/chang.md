# 프록시 패턴

특정 객체에 대한 접근을 제어하거나 기능을 추가 할 수 있는 패턴

대리인 패턴 → 접근 제어, 비용이 큰 경우 초기화 지연, 로깅, 캐싱

interface로 메소드 설계 → RealSubject를 인터페이스를 받아 implements로 구현. 

Proxy 역시 인터페이스 받아서 구현하되, RealSubject를 주입받아서, 리얼 서비스 자체를 변수로 받아서 처리하기

부가적인 일을 Proxy가 대신해서 처리할 수 있다. (메소드 직전에 앞뒤로 로깅한다던가... Real Object가 주입이 되었는지 확인도 가능함)

## 장단점

장점

- 기존 코드 변경없이 새로운 기능 추가 가능
- 기존 코드가 해야하는 일만 유지 가능.
- 기능 추가 및 초기화 지연 등으로 다양하게 활용 가능.

단점 

- 코드 복잡도 증가

## 어디서 쓰는가?

자바

다이나믹 프록시, 리플렉션.

invocationHandler을 통해서 invoke 메소드를 통해서 클래스 로드하고, 클래스를 받아서, 프록시 방식으로 적용해준다.

스프링 

AOP

Aspect를 적용하면, → 내부적으로 다이나믹 프록시를 사용해서 동적으로 프록시 빈을 만듬. 프록시 빈을 인터페이스로 

CGLibray를 통해 가짜객체로 감싸고 사용하게 됨.  ⇒ 진짜 객체를 사용해서 덮어 씌우는 방식으로 이용되어진다. 

@Transactional, @Cachable과 같은 것들이 모두 AOP를 통해서 구현되어진 방식이다. 

JPA

proxy방식임.