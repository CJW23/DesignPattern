# 퍼사드 패턴

복잡한 서브 시스템 의존성을 최소화하는 방법.

퍼사드: 전경을 바라보는 것! *lossing coupling → 의존성을 약하게 하기...*

![Untitled](/구조/6주차-퍼사드/img/Untitled.png)

클라이언트가 사용해야하는 복잡합 서브 시스템 의존성을 간단한 인터페이스로 추상화 할 수 있다.

클라이언트는 퍼사드만 사용하고, 나머지것들은 서브 시스템이 사용하는 방식

클라이언트가 하나인 경우에는 상관없는데... 여러곳에서 받아서 사용한다면, 이메일 변경을 위해서 많은 공수가 들어가지만... 유연하게 대처하려면 퍼사드 패턴을 직접 사용해보면 그런부분에서 잘 작동할 것. 

내부 추상화된 것만 클라이언트에 메소드 노출 시키며, 디테일한 것들은 퍼사드가 다 가져가면서 활용할 수 있다. 

## 장점 / 단점

장점

- 한곳에 의존성을 몰아 넣는 효과가 있음.

단점

- 퍼사드 자체가 의존성을 가지게 됨.

## 어디에서 사용되는가?

Spring

브릿지 패턴들을 대부분 퍼사드라고 봐도 관점의 차이라고 볼 수 있는것이지 다른 건 없다.

디자인 패턴으로 구현되어있는 코드는 여러가지 패턴이 섞여있다고 말할 수 있다.

- MailSender
- PlatformTransactionManager
- Spring Web MVC → webflux수도.. Servelet일 수도...

뭘쓸지는 내가 옵션으로 결정하는 방식이다. 즉, 내가 어떤 플렛폼으로 이기능을 사용할건지만 결정하면 되는 것이다.

위에 나왔듯 Mail, Transaction, Web MVC과 같이 

## 라라벨에 특히 많이 나왔다

```php
use Illuminate\Support\Facades\Cache;

Route::get('/cache', function () {
    return Cache::get('key');
});
```

→ 파사드 패턴을 적극 차용한 게 특히 라라벨인데, 라라벨에서 대부분의 기능들을 정적 메소드로 제공하고, 그 옵션을 Config.php 에서 작성하면 적용되고,

Memcached를 쓰던, Redis를 쓰든간에, Config에서 내 옵션을 설정만 해주면 지가 알아서 의존성 잡아주고, 그 기능대로 작동하는 패턴이 특히 라라벨에서 많이 채용했었다. (Cache만 아니라 별의 별 기능에 죄다 파사드로 잡혀있음)

[라라벨 8.x - 파사드](https://laravel.kr/docs/8.x/facades#%ED%8C%8C%EC%82%AC%EB%93%9C%20%ED%81%B4%EB%9E%98%EC%8A%A4%20%EB%AA%A9%EB%A1%9D)

```php
$users = DB::connection('foo')->select(...); //커넥션을 뭘로할지...
DB::select('select * from users where active = ?', [1]); //SELECT 쿼리는 뭘로 던질지? 정도만 설정하는 정도?
```

파사드의 가장 큰 특징은 앞단에서 기능은 다 구현되어있고, 뒷단에서 그 기능을 사용할  플렛폼만 결정하면 되는 방식인 거라고 생각한다.
