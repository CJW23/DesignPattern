# 상태 패턴

객체 내부 상태 변경에 따라 객체의 행동이 달라지는 패턴.

상태에 특화된 행동들을 분리해낼 수 있으며 새로운 해동을 추가하더라도 다른 행동에 영향을 주지 않는다. 

![스크린샷 2022-02-09 오후 8.35.34.png](/행동/11주차-상태/img/chang1.png)

## 현실적인 문제점들

![Untitled](https://refactoring.guru/images/patterns/diagrams/state/problem2-en.png?id=8a3cb79b309a9d832762)

문서 작성의 경우 3가지 상태가 존재하고, 각 상태로 이동할 수 있는 방법들이 많이 존재한다. 

이 문서에 대해서 상태 변환을 해주려면.... if else 문을 통해서 각 상태가 뭔지.. 체크한뒤에 그에 맞는 method에 대한 상태도 체크해줘야하며... 결국에는 상태 패턴을 일일히 확인해줘야하는 문제점이 생긴다. 

즉, 코드 자체가 엄청 난잡해진다.

### 해결방안

차라리 상태를 Interface로 구성하고 각 상태를  class로 구현하고 인터페이스를 구현하는 방식을 취해버리면 오히려 난잡성이 줄어든다. 

이러한 state에 의존하는 method들은 state interface에 메소드로 구성하고, 각 상태에 맞는 메소드를 구성해서 그 형태에 맞게 메소드를 구현하면 된다.

그리고 원래 이 상태를 가지고 있는 객체에는 상태를 변수로 담고 상태 클래스를 직접 받아서 changeState를 통해 state를 변화시키는 방식으로 코드를 짜게되면

코드 자체가 약간 복잡해 보일 수는 있어도, 상태별로 상태에 맞는 행동을 취한다는 것과 실제 상태를 가지는 객체는 상태 변화만 체크하면된다. 

![Untitled](https://refactoring.guru/images/patterns/diagrams/state/solution-en.png?id=2db312e603c026421063)

## 장점과 단점

### 장점

상태에 따른 동작을 개별 클래스로 옮겨서 관리할 수 있다.

기존의 특정 상태에 따른 동작을 변경하지 않고 새로운 상태에 다른 동작을 추가할 수 있다.

코드 복잡도가 줄어든다. ⇒ 가시성이 증가

### 단점

복잡도의 증가